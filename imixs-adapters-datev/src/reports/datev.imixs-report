<?xml version="1.0" encoding="UTF-8" standalone="yes"?><document xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><item name="attributes"><value xsi:type="xmlItem"><value xsi:type="xs:string">$uniqueid</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$modified</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$workflowgroup</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$processid</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_subject</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicenumber</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicedate</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_amount_brutto</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_currency</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_childitems</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicedate</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value></item><item name="contenttype"><value xsi:type="xs:string"></value></item><item name="encoding"><value xsi:type="xs:string">UTF-8</value></item><item name="txtdescription"><value xsi:type="xs:string">DATEV export executed by teh DatevScheduler. See the XSL definition for details.   </value></item><item name="txtname"><value xsi:type="xs:string">datev</value></item><item name="txtquery"><value xsi:type="xs:string">(type:"workitem" AND $modelversion:"rechnungseingang-0.0.1" AND $processid:5800) </value></item><item name="xsl"><value xsi:type="xs:string">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&lt;xsl:stylesheet 	xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;	&lt;xsl:strip-space elements="*" /&gt;	&lt;xsl:output method="xml" indent="yes" encoding="UTF-8" standalone="yes" /&gt;	&lt;xsl:template match="/"&gt;		&lt;Document			xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.003.03"			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"			xsi:schemaLocation="urn:iso:std:iso:20022:tech:xsd:pain.001.003.03 pain.001.003.03.xsd"&gt;			&lt;CstmrCdtTrfInitn&gt;				&lt;!-- generate header info --&gt;				&lt;!-- compute count of inoices --&gt;				&lt;xsl:variable name="count"					select="count(/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'Rechnungseingang']/item[@name='$uniqueid']/value)" /&gt;				&lt;!-- comput total amount --&gt;				&lt;xsl:variable name="total"					select="sum(/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'Rechnungseingang']/item[@name='_amount_brutto']/value)" /&gt;				&lt;!-- shotcut for the sepa export document --&gt;				&lt;xsl:variable name="exportWorkitem"					select="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'SEPA-Export']" /&gt;				&lt;GrpHdr&gt;					&lt;MsgId&gt;						&lt;xsl:value-of							select="$exportWorkitem/item[@name='$uniqueid']/value" /&gt;					&lt;/MsgId&gt;					&lt;CreDtTm&gt;2018-08-20T17:34:47&lt;/CreDtTm&gt;					&lt;NbOfTxs&gt;						&lt;xsl:value-of select="$count" /&gt;					&lt;/NbOfTxs&gt;					&lt;CtrlSum&gt;						&lt;xsl:value-of select="$total" /&gt;					&lt;/CtrlSum&gt;					&lt;InitgPty&gt;						&lt;Nm&gt;							&lt;xsl:value-of								select="$exportWorkitem/item[@name='_subject']/value" /&gt;						&lt;/Nm&gt;					&lt;/InitgPty&gt;				&lt;/GrpHdr&gt;				&lt;PmtInf&gt;					&lt;PmtInfId&gt;						&lt;xsl:value-of							select="$exportWorkitem/item[@name='$uniqueid']/value" /&gt;&lt;xsl:text&gt;-1&lt;/xsl:text&gt;					&lt;/PmtInfId&gt;					&lt;PmtMtd&gt;TRF&lt;/PmtMtd&gt;					&lt;NbOfTxs&gt;						&lt;xsl:value-of select="$count" /&gt;					&lt;/NbOfTxs&gt;					&lt;CtrlSum&gt;						&lt;xsl:value-of select="$total" /&gt;					&lt;/CtrlSum&gt;					&lt;PmtTpInf&gt;						&lt;SvcLvl&gt;							&lt;Cd&gt;SEPA&lt;/Cd&gt;						&lt;/SvcLvl&gt;					&lt;/PmtTpInf&gt;					&lt;ReqdExctnDt&gt;1999-01-01&lt;/ReqdExctnDt&gt;					&lt;Dbtr&gt;						&lt;Nm&gt;							&lt;xsl:value-of								select="$exportWorkitem/item[@name='_subject']/value" /&gt;						&lt;/Nm&gt;					&lt;/Dbtr&gt;					&lt;DbtrAcct&gt;						&lt;Id&gt;							&lt;IBAN&gt;								&lt;xsl:value-of									select="$exportWorkitem/item[@name='_dbtr_iban']/value" /&gt;							&lt;/IBAN&gt;						&lt;/Id&gt;					&lt;/DbtrAcct&gt;					&lt;DbtrAgt&gt;						&lt;FinInstnId&gt;							&lt;BIC&gt;								&lt;xsl:value-of									select="$exportWorkitem/item[@name='_dbtr_bic']/value" /&gt;							&lt;/BIC&gt;						&lt;/FinInstnId&gt;					&lt;/DbtrAgt&gt;					&lt;ChrgBr&gt;SLEV&lt;/ChrgBr&gt;					&lt;!-- generate CdtTrfTxInf for each invoice --&gt;					&lt;xsl:apply-templates						select="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'Rechnungseingang']" /&gt;				&lt;/PmtInf&gt;			&lt;/CstmrCdtTrfInitn&gt;		&lt;/Document&gt;	&lt;/xsl:template&gt;	&lt;!-- This template builds sepa header info --&gt;	&lt;xsl:template		match="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'SEPA-Export']"&gt;		&lt;!-- not in use --&gt;	&lt;/xsl:template&gt;	&lt;!-- This template builds sepa payment info for each invoice --&gt;	&lt;xsl:template		match="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'Rechnungseingang']"&gt;		&lt;CdtTrfTxInf&gt;			&lt;PmtId&gt;				&lt;EndToEndId&gt;NOTPROVIDED&lt;/EndToEndId&gt;			&lt;/PmtId&gt;			&lt;Amt&gt;				&lt;InstdAmt&gt;					&lt;xsl:attribute name="Ccy"&gt;&lt;xsl:value-of						select="item[@name='_currency']/value" /&gt;&lt;/xsl:attribute&gt;					&lt;xsl:value-of						select="item[@name='_amount_brutto']/value" /&gt;				&lt;/InstdAmt&gt;			&lt;/Amt&gt;			&lt;CdtrAgt&gt;				&lt;FinInstnId&gt;					&lt;BIC&gt;						&lt;xsl:value-of select="item[@name='_cdtr_bic']/value" /&gt;					&lt;/BIC&gt;				&lt;/FinInstnId&gt;			&lt;/CdtrAgt&gt;			&lt;Cdtr&gt;				&lt;Nm&gt;					&lt;xsl:value-of select="item[@name='_supplier']/value" /&gt;				&lt;/Nm&gt;			&lt;/Cdtr&gt;			&lt;CdtrAcct&gt;				&lt;Id&gt;					&lt;IBAN&gt;						&lt;xsl:value-of select="item[@name='_cdtr_iban']/value" /&gt;					&lt;/IBAN&gt;				&lt;/Id&gt;			&lt;/CdtrAcct&gt;			&lt;RmtInf&gt;				&lt;Ustrd&gt;					&lt;xsl:value-of select="item[@name='_subject']/value" /&gt;				&lt;/Ustrd&gt;			&lt;/RmtInf&gt;		&lt;/CdtTrfTxInf&gt;	&lt;/xsl:template&gt;&lt;/xsl:stylesheet&gt;</value></item><item name="xslresource"><value xsi:type="xs:string">/imixs-adapters-sepa/src/reports/sepa.xsl</value></item></document>